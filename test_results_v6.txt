00:00 +0: loading /Users/wbhinton/projects/ELRS/test/pwm_controller_test.dart
00:00 +0: /Users/wbhinton/projects/ELRS/test/firmware_forensics_test.dart: ER8 Binary Forensics: Byte-Perfect Assembly Check
00:00 +1: /Users/wbhinton/projects/ELRS/test/backpack_controller_test.dart: Backpack Flash Pipeline succeeds
00:00 +2: /Users/wbhinton/projects/ELRS/test/backpack_controller_test.dart: Backpack Flash Pipeline succeeds
00:00 +3: /Users/wbhinton/projects/ELRS/test/backpack_controller_test.dart: Backpack Flash Pipeline succeeds
00:00 +4: /Users/wbhinton/projects/ELRS/test/backpack_controller_test.dart: Backpack Flash Pipeline succeeds
00:00 +5: /Users/wbhinton/projects/ELRS/test/pwm_controller_test.dart: PwmController parses output array
00:00 +6: /Users/wbhinton/projects/ELRS/test/pwm_controller_test.dart: PwmController updates specific pin and saves
00:00 +7: /Users/wbhinton/projects/ELRS/test/stm32_firmware_patcher_test.dart: Stm32FirmwarePatcher Patches version 0 firmware correctly
00:00 +8: /Users/wbhinton/projects/ELRS/test/stm32_firmware_patcher_test.dart: Stm32FirmwarePatcher Patches non-zero version firmware correctly
00:00 +9: /Users/wbhinton/projects/ELRS/test/stm32_firmware_patcher_test.dart: Stm32FirmwarePatcher Throws if magic header missing
00:00 +10: /Users/wbhinton/projects/ELRS/test/releases_repository_test.dart: Repository fetches and filters versions correctly
00:00 +11: /Users/wbhinton/projects/ELRS/test/releases_repository_test.dart: Repository handles API error
RELEASES: Offline or Artifactory unreachable. Fallback to cache may be available.
00:00 +12: /Users/wbhinton/projects/ELRS/test/targets_repository_test.dart: fetchTargets returns data from network and caches it
00:00 +13: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:00 +13: /Users/wbhinton/projects/ELRS/test/targets_repository_test.dart: fetchTargets returns data from cache when network fails
Failed to fetch targets online: DioException [unknown]: null. Checking cache...
00:00 +14: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:00 +14: /Users/wbhinton/projects/ELRS/test/targets_repository_test.dart: fetchTargets throws when network fails and cache is empty
Failed to fetch targets online: Exception: Network error. Checking cache...
00:00 +15: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:01 +16: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:01 +17: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:01 +18: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:01 +18: /Users/wbhinton/projects/ELRS/test/device_repository_test.dart: DeviceRepository flashFirmware throws exception on error
Skipping compression for platform: null
Trimming Delta: 0
Final Byte Count: 3
00:01 +19: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
00:01 +20: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
test/targets_fetch_test.dart:8:3: Error: Undefined name 'TestWidgetsFlutterBinding'.
  TestWidgetsFlutterBinding.ensureInitialized();
  ^^^^^^^^^^^^^^^^^^^^^^^^^
test/targets_fetch_test.dart:9:3: Error: Undefined name 'SharedPreferences'.
  SharedPreferences.setMockInitialValues({});
  ^^^^^^^^^^^^^^^^^
test/targets_fetch_test.dart:14:45: Error: No named parameter with the name 'url'.
      TargetDefinition(name: 'Test Target', url: 'http://test.com'),
                                            ^^^
lib/src/features/flashing/domain/target_definition.dart:8:17: Context: Found this candidate, but the arguments don't match.
  const factory TargetDefinition({
                ^
test/targets_fetch_test.dart:20:9: Error: Undefined name 'targetsRepositoryProvider'.
        targetsRepositoryProvider.overrideWith((ref) => mockRepo),
        ^^^^^^^^^^^^^^^^^^^^^^^^^
test/targets_fetch_test.dart:18:23: Error: Method not found: 'ProviderContainer'.
    final container = ProviderContainer(
                      ^^^^^^^^^^^^^^^^^
test/targets_fetch_test.dart:23:5: Error: Method not found: 'addTearDown'.
    addTearDown(container.dispose);
    ^^^^^^^^^^^
test/targets_fetch_test.dart:26:42: Error: Undefined name 'targetsProvider'.
    final targets = await container.read(targetsProvider.future);
                                         ^^^^^^^^^^^^^^^
test/targets_fetch_test.dart:29:21: Error: Undefined name 'isNotEmpty'.
    expect(targets, isNotEmpty);
                    ^^^^^^^^^^
test/targets_fetch_test.dart:29:5: Error: Method not found: 'expect'.
    expect(targets, isNotEmpty);
    ^^^^^^
test/targets_fetch_test.dart:30:32: Error: Method not found: 'equals'.
    expect(targets.first.name, equals('Test Target'));
                               ^^^^^^
test/targets_fetch_test.dart:30:5: Error: Method not found: 'expect'.
    expect(targets.first.name, equals('Test Target'));
    ^^^^^^
test/targets_fetch_test.dart:11:3: Error: Method not found: 'test'.
  test('Targets Provider fetches data successfully', () async {
  ^^^^
00:01 +20 -1: loading /Users/wbhinton/projects/ELRS/test/targets_fetch_test.dart [E]
  Failed to load "/Users/wbhinton/projects/ELRS/test/targets_fetch_test.dart":
  Compilation failed for testPath=/Users/wbhinton/projects/ELRS/test/targets_fetch_test.dart: test/targets_fetch_test.dart:8:3: Error: Undefined name 'TestWidgetsFlutterBinding'.
    TestWidgetsFlutterBinding.ensureInitialized();
    ^^^^^^^^^^^^^^^^^^^^^^^^^
  test/targets_fetch_test.dart:9:3: Error: Undefined name 'SharedPreferences'.
    SharedPreferences.setMockInitialValues({});
    ^^^^^^^^^^^^^^^^^
  test/targets_fetch_test.dart:14:45: Error: No named parameter with the name 'url'.
        TargetDefinition(name: 'Test Target', url: 'http://test.com'),
                                              ^^^
  lib/src/features/flashing/domain/target_definition.dart:8:17: Context: Found this candidate, but the arguments don't match.
    const factory TargetDefinition({
                  ^
  test/targets_fetch_test.dart:20:9: Error: Undefined name 'targetsRepositoryProvider'.
          targetsRepositoryProvider.overrideWith((ref) => mockRepo),
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  test/targets_fetch_test.dart:18:23: Error: Method not found: 'ProviderContainer'.
      final container = ProviderContainer(
                        ^^^^^^^^^^^^^^^^^
  test/targets_fetch_test.dart:23:5: Error: Method not found: 'addTearDown'.
      addTearDown(container.dispose);
      ^^^^^^^^^^^
  test/targets_fetch_test.dart:26:42: Error: Undefined name 'targetsProvider'.
      final targets = await container.read(targetsProvider.future);
                                           ^^^^^^^^^^^^^^^
  test/targets_fetch_test.dart:29:21: Error: Undefined name 'isNotEmpty'.
      expect(targets, isNotEmpty);
                      ^^^^^^^^^^
  test/targets_fetch_test.dart:29:5: Error: Method not found: 'expect'.
      expect(targets, isNotEmpty);
      ^^^^^^
  test/targets_fetch_test.dart:30:32: Error: Method not found: 'equals'.
      expect(targets.first.name, equals('Test Target'));
                                 ^^^^^^
  test/targets_fetch_test.dart:30:5: Error: Method not found: 'expect'.
      expect(targets.first.name, equals('Test Target'));
      ^^^^^^
  test/targets_fetch_test.dart:11:3: Error: Method not found: 'test'.
    test('Targets Provider fetches data successfully', () async {
    ^^^^
  .
00:01 +20 -1: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items
══╡ EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK ╞════════════════════════════════════════════════════
The following TestFailure was thrown running a test:
Expected: at least one matching candidate
  Actual: _TextContainingWidgetFinder:<Found 0 widgets with text containing Status: []>
   Which: means none were found but some were expected

When the exception was thrown, this was the stack:
#4      main.<anonymous closure> (file:///Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart:41:5)
<asynchronous suspension>
#5      testWidgets.<anonymous closure>.<anonymous closure> (package:flutter_test/src/widget_tester.dart:192:15)
<asynchronous suspension>
#6      TestWidgetsFlutterBinding._runTestBody (package:flutter_test/src/binding.dart:1682:5)
<asynchronous suspension>
<asynchronous suspension>
(elided one frame from package:stack_trace)

This was caught by the test expectation on the following line:
  file:///Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart line 41
The test description was:
  Dashboard renders all menu items
════════════════════════════════════════════════════════════════════════════════════════════════════
00:01 +20 -2: /Users/wbhinton/projects/ELRS/test/flashing_screen_test.dart: FlashingScreen loads with correct title and button
00:01 +20 -2: /Users/wbhinton/projects/ELRS/test/dashboard_screen_test.dart: Dashboard renders all menu items [E]
  Test failed. See exception logs above.
  The test description was: Dashboard renders all menu items
  
00:02 +21 -2: /Users/wbhinton/projects/ELRS/test/widget_test.dart: App renders without crashing
00:02 +22 -2: /Users/wbhinton/projects/ELRS/test/widget_test.dart: App renders without crashing
00:03 +23 -2: /Users/wbhinton/projects/ELRS/test/target_resolver_test.dart: TargetResolver applyOverlay merges correctly
00:03 +24 -2: /Users/wbhinton/projects/ELRS/test/target_resolver_test.dart: TargetResolver resolveLayout finds file in RX folder
00:03 +25 -2: /Users/wbhinton/projects/ELRS/test/target_resolver_test.dart: TargetResolver resolveLayout falls back to basename search
00:03 +26 -2: /Users/wbhinton/projects/ELRS/test/target_resolver_test.dart: TargetResolver resolveLayout throws specific error when not found
00:03 +27 -2: /Users/wbhinton/projects/ELRS/test/binding_phrase_utils_test.dart: BindingPhraseUtils Generates correct UID for standard phrase
00:03 +28 -2: /Users/wbhinton/projects/ELRS/test/binding_phrase_utils_test.dart: BindingPhraseUtils Generates empty UID for empty phrase
00:03 +29 -2: /Users/wbhinton/projects/ELRS/test/hardware_config_merger_test.dart: HardwareConfigMerger Merges overlay into base layout correctly
00:03 +30 -2: /Users/wbhinton/projects/ELRS/test/hardware_config_merger_test.dart: HardwareConfigMerger Handles null or empty overlay
00:03 +31 -2: /Users/wbhinton/projects/ELRS/test/hardware_config_merger_test.dart: HardwareConfigMerger Does not mutate base layout
00:03 +32 -2: /Users/wbhinton/projects/ELRS/test/device_config_model_test.dart: DeviceConfig Model Parses valid /config JSON correctly
00:03 +33 -2: /Users/wbhinton/projects/ELRS/test/device_config_model_test.dart: DeviceConfig Model Handles missing optional fields
00:03 +34 -2: /Users/wbhinton/projects/ELRS/test/discovery_service_test.dart: Provider emits IP when device is found
00:03 +35 -2: /Users/wbhinton/projects/ELRS/test/device_settings_repository_test.dart: DeviceRepository Settings updateBindingPhrase sends correct UID payload
00:04 +36 -2: /Users/wbhinton/projects/ELRS/test/firmware_manager_controller_test.dart: Download is rejected when cache limit is reached
00:04 +37 -2: /Users/wbhinton/projects/ELRS/test/firmware_manager_controller_test.dart: Download is rejected when cache limit is reached
00:04 +38 -2: /Users/wbhinton/projects/ELRS/test/firmware_manager_controller_test.dart: Download succeeds when under cache limit
00:04 +39 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Repository updates Base URL when Discovery finds device
Provider Transition: AsyncLoading<String?>() -> AsyncData<String?>(value: null)
CONNECTION: Target IP updated to 192.168.1.55
Provider Transition: AsyncData<String?>(value: null) -> AsyncData<String?>(value: 192.168.1.55)
Final Provider Value: AsyncData<String?>(value: 192.168.1.55)
Repo Base URL: http://192.168.1.55
00:04 +40 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +40 -2: /Users/wbhinton/projects/ELRS/test/device_repository_flashing_test.dart: DeviceRepository Flashing Tests flashFirmware sends GZIP compressed multipart request with correct headers
Skipping compression for platform: null
Trimming Delta: 0
Final Byte Count: 3
LOG: Flash successful!
00:04 +41 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +41 -2: /Users/wbhinton/projects/ELRS/test/device_repository_flashing_test.dart: DeviceRepository Flashing Tests flashFirmware does NOT double-compress .gz files
Skipping compression for platform: null
Trimming Delta: 0
Final Byte Count: 3
LOG: Flash successful!
00:04 +42 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +42 -2: /Users/wbhinton/projects/ELRS/test/device_repository_flashing_test.dart: DeviceRepository Flashing Tests flashFirmware handles 500 error
Skipping compression for platform: null
Trimming Delta: 0
Final Byte Count: 0
00:04 +43 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +44 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +45 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +46 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
00:04 +47 -2: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected
══╡ EXCEPTION CAUGHT BY FLUTTER TEST FRAMEWORK ╞════════════════════════════════════════════════════
The following TestFailure was thrown running a test:
Expected: exactly one matching candidate
  Actual: _TextContainingWidgetFinder:<Found 0 widgets with text containing Scanning: []>
   Which: means none were found but one was expected

When the exception was thrown, this was the stack:
#4      main.<anonymous closure>.<anonymous closure> (file:///Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart:91:7)
<asynchronous suspension>
#5      testWidgets.<anonymous closure>.<anonymous closure> (package:flutter_test/src/widget_tester.dart:192:15)
<asynchronous suspension>
#6      TestWidgetsFlutterBinding._runTestBody (package:flutter_test/src/binding.dart:1682:5)
<asynchronous suspension>
<asynchronous suspension>
(elided one frame from package:stack_trace)

This was caught by the test expectation on the following line:
  file:///Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart line 91
The test description was:
  Badge shows Green when connected
════════════════════════════════════════════════════════════════════════════════════════════════════
00:04 +47 -3: /Users/wbhinton/projects/ELRS/test/discovery_integration_test.dart: Discovery Integration Test Badge shows Green when connected [E]
  Test failed. See exception logs above.
  The test description was: Badge shows Green when connected
  
00:05 +47 -3: loading /Users/wbhinton/projects/ELRS/test/assets/ER8/er8_forensics_test.dart
Forensic analysis complete. Results written to: test/assets/ER8/forensic_results.txt
=== ER8 BINARY FORENSIC REPORT ===
Pixel 10 Output: 1140800 bytes
Webflasher Output: 1140800 bytes
Length Match: true
----------------------------------
Marker "EXPRESSLRS" Offset (Pixel): 0x-1
Marker "EXPRESSLRS" Offset (Web):   0x-1
Marker Shift: 0 bytes
INFO: Bypassed randomized flash-discriminator divergence safely.

RESULT: BIT-PERFECT MATCH FOUND!

00:05 +47 -3: /Users/wbhinton/projects/ELRS/test/unified_firmware_builder_test.dart: UnifiedFirmwareBuilder Builds correctly structured binary
00:05 +48 -3: /Users/wbhinton/projects/ELRS/test/unified_firmware_builder_test.dart: UnifiedFirmwareBuilder Trims firmware correctly
00:05 +49 -3: /Users/wbhinton/projects/ELRS/test/unified_firmware_builder_test.dart: UnifiedFirmwareBuilder Includes Wi-Fi credentials in options JSON
00:05 +50 -3: /Users/wbhinton/projects/ELRS/test/unified_firmware_builder_test.dart: UnifiedFirmwareBuilder Builds correctly with specific BetaFPV strings
00:05 +51 -3: /Users/wbhinton/projects/ELRS/test/flashing_pipeline_test.dart: Flash Action completes successfully
00:05 +52 -3: /Users/wbhinton/projects/ELRS/test/flashing_pipeline_test.dart: Flash Action completes successfully
00:05 +52 -3: /Users/wbhinton/projects/ELRS/test/firmware_assembler_test.dart: FirmwareAssembler assembleEspUnified builds correct structure
DEBUG: Original Firmware Size: 3
DEBUG: Magic byte not found, returning full length
DEBUG: Calculated True End (Surgical): 3
DEBUG: Bytes Stripped (Padding + Old Config): 0
00:05 +53 -3: /Users/wbhinton/projects/ELRS/test/flashing_pipeline_test.dart: Flash Action completes successfully
00:05 +53 -3: /Users/wbhinton/projects/ELRS/test/firmware_assembler_test.dart: FirmwareAssembler assembleEspUnified handles ESP32 platform
DEBUG: Original Firmware Size: 3
DEBUG: Magic byte not found, returning full length
DEBUG: Calculated True End (Surgical): 3
DEBUG: Bytes Stripped (Padding + Old Config): 0
00:05 +54 -3: /Users/wbhinton/projects/ELRS/test/flashing_pipeline_test.dart: Flash Action completes successfully
FLASHING: Started (Heartbeat silenced: true)
FLASHING: Finished (Heartbeat silenced: false)
00:05 +55 -3: /Users/wbhinton/projects/ELRS/test/flashing_pipeline_test.dart: Flash Action handles download error
FLASHING: Started (Heartbeat silenced: true)
FLASHING: Finished (Heartbeat silenced: false)
00:06 +56 -3: /Users/wbhinton/projects/ELRS/test/settings_controller_test.dart: Settings load with correct defaults
00:06 +57 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService fetchConfig returns RuntimeConfig on success
00:06 +58 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService fetchConfig returns RuntimeConfig on success
00:06 +59 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService fetchConfig returns RuntimeConfig on success
Raw Device Config JSON: {settings: {field1: val1}, options: {wifi-ssid: mikes-wifi}, config: {hardware: lite}, modelId: 255, modelMatch: false}
00:06 +60 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService saveOptions sends correct payload and headers
00:06 +61 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService reboot sends POST request to /reboot
00:06 +62 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: DeviceConfigService fetchConfig throws exception on error
00:06 +63 -3: /Users/wbhinton/projects/ELRS/test/device_config_service_test.dart: RuntimeConfig model fromJson and toJson work correctly
00:06 +64 -3: Some tests failed.
